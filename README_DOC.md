
# Документация к скрипту генерации Markdown-документации по шаблону Zabbix

## Описание

Скрипт предназначен для **автоматической генерации документации в формате Markdown** (`.md`) по шаблонам Zabbix (файлы в формате YAML, экспортированные из Zabbix).
В результате работы вы получаете файл с описанием всех метрик, триггеров, макросов, discovery-правил и их прототипов в виде удобных таблиц — аналогично официальному оформлению шаблонов Zabbix на GitHub.

---

## Требования

- Python 3.7+
- Установленный модуль **pyyaml**
  Установить можно так:
  ```
  pip install pyyaml
  ```

---

## Как пользоваться

### 1. Подготовьте файл шаблона Zabbix

Экспортируйте нужный шаблон из Zabbix в формате YAML (например, `zbx_export_templates.yaml`).

---

### 2. Запуск скрипта

Скрипт принимает **два аргумента**:

1. **Путь к файлу шаблона** (обязательный)
2. **Имя выходного markdown-файла** (необязательный, по умолчанию `README.md`)

#### Примеры запуска:

- **Простой вариант (выходной файл — README.md):**
  ```
  python script.py zbx_export_templates.yaml
  ```

- **Указать своё имя markdown-файла:**
  ```
  python script.py zbx_export_templates.yaml mydoc.md
  ```

---

### 3. Что получится

На выходе получится markdown-файл с секциями:
- Template name
- Items
- Triggers
- Macros
- Discovery rules
- Item prototypes для discovery
- Trigger prototypes для discovery

Все данные автоматически собраны из yaml-файла, описания очищены для совместимости с markdown-таблицами (многострочные описания внутри таблицы сохраняются корректно).

---

## Важные детали

- Все переносы строк в описаниях заменяются на `<br>` — это нужно для корректного отображения длинных описаний внутри markdown-таблиц.
- Символы “|” в описаниях экранируются для совместимости с markdown.
- Если шаблон содержит несколько discovery-правил, для каждого из них будут свои таблицы item и trigger prototypes.

---

## Пример команды

```bash
python script.py zbx_export_templates.yaml LinuxTemplate.md
```

---

## Возможные ошибки

- **Файл шаблона не найден:**
  Проверьте правильность пути к YAML-файлу.
- **pyyaml не установлен:**
  Установите через `pip install pyyaml`.
- **Файл шаблона не экспортирован в формате YAML:**
  Экспортируйте заново из Zabbix, выбрав формат YAML.
